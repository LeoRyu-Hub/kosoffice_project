<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.koffice.sales.dao.salesDao">
	
	<resultMap type = "com.koffice.vo.sales.salesInfoVO" id = "salesMap">
		<result column = "SALES_DT" 				property = "salesDt"/>
		<result column = "SALES_PRICE" 				property = "salesPrice"/>
		<result column = "REG_DT" 					property = "regDt"/>
		<result column = "RN" 						property = "rn"/>
	</resultMap>
	
	<select id ="selectSalesList" resultMap = "salesMap">
		SELECT *
		FROM (SELECT 
	    		A.SALES_PRICE,
	    		TO_CHAR(A.SALES_DT,'YYYY-MM-DD') AS SALES_DT,
	    		ROWNUM RN
	    	FROM TBL_SALES_INFO A
	    	WHERE 1=1
	    	<if test="startDt!=null and startDt!='' ">
			 AND SALES_DT <![CDATA[>=]]> #{startDt}
			</if>
			<if test="endDt!=null and endDt!='' ">
			 AND SALES_DT <![CDATA[<=]]> #{endDt}
			</if>
			)
		WHERE RN<![CDATA[>]]>(#{currentPage}-1)*#{countPerPage}
	 	AND RN<![CDATA[<=]]>#{currentPage}*#{countPerPage}
	</select>
	
	<select id = "selectTotalSalesPageCnt" resultType = "integer">
		SELECT COUNT(*)
		FROM TBL_SALES_INFO A
		WHERE 1=1
		<if test="startDt!=null and startDt!='' ">
			 AND SALES_DT <![CDATA[>=]]> #{startDt}
		</if>
		<if test="endDt!=null and endDt!='' ">
			 AND SALES_DT <![CDATA[<=]]> #{endDt}
		</if>
	</select>
	
	
</mapper>